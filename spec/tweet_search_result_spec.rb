require 'spec_helper'

describe TwitterShuwei::TweetSearchResult do
  it 'should return tweet text' do
    response = {"statuses"=>[{"metadata"=>{"result_type"=>"recent", "iso_language_code"=>"en"}, "created_at"=>"Wed Aug 21 04:29:08 +0000 2013", "id"=>370039845194039296, "id_str"=>"370039845194039296", "text"=>"RT @SassyGirI: hello 911\n\nI accidentally dropped the thun thun thun", "source"=>"<a href=\"http://twitter.com/download/iphone\" rel=\"nofollow\">Twitter for iPhone</a>", "truncated"=>false, "in_reply_to_status_id"=>nil, "in_reply_to_status_id_str"=>nil, "in_reply_to_user_id"=>nil, "in_reply_to_user_id_str"=>nil, "in_reply_to_screen_name"=>nil, "user"=>{"id"=>616804459, "id_str"=>"616804459", "name"=>"Cady Bodenhamer", "screen_name"=>"cady_boden13", "location"=>"North Carolina ", "description"=>"Dont let your past bring you down.", "url"=>nil, "entities"=>{"description"=>{"urls"=>[]}}, "protected"=>false, "followers_count"=>483, "friends_count"=>407, "listed_count"=>0, "created_at"=>"Sun Jun 24 05:23:10 +0000 2012", "favourites_count"=>289, "utc_offset"=>-10800, "time_zone"=>"Atlantic Time (Canada)", "geo_enabled"=>false, "verified"=>false, "statuses_count"=>2585, "lang"=>"en", "contributors_enabled"=>false, "is_translator"=>false, "profile_background_color"=>"C0DEED", "profile_background_image_url"=>"http://a0.twimg.com/images/themes/theme1/bg.png", "profile_background_image_url_https"=>"https://si0.twimg.com/images/themes/theme1/bg.png", "profile_background_tile"=>false, "profile_image_url"=>"http://a0.twimg.com/profile_images/378800000315025079/42b97950446b9397822d452ea9ef258b_normal.jpeg", "profile_image_url_https"=>"https://si0.twimg.com/profile_images/378800000315025079/42b97950446b9397822d452ea9ef258b_normal.jpeg", "profile_banner_url"=>"https://pbs.twimg.com/profile_banners/616804459/1376866273", "profile_link_color"=>"0084B4", "profile_sidebar_border_color"=>"C0DEED", "profile_sidebar_fill_color"=>"DDEEF6", "profile_text_color"=>"333333", "profile_use_background_image"=>true, "default_profile"=>true, "default_profile_image"=>false, "following"=>false, "follow_request_sent"=>false, "notifications"=>false}, "geo"=>nil, "coordinates"=>nil, "place"=>nil, "contributors"=>nil, "retweeted_status"=>{"metadata"=>{"result_type"=>"recent", "iso_language_code"=>"en"}, "created_at"=>"Tue Aug 20 23:30:14 +0000 2013", "id"=>369964621480067072, "id_str"=>"369964621480067072", "text"=>"hello 911\n\nI accidentally dropped the thun thun thun", "source"=>"<a href=\"http://www.socialoomph.com\" rel=\"nofollow\">SocialOomph</a>", "truncated"=>false, "in_reply_to_status_id"=>nil, "in_reply_to_status_id_str"=>nil, "in_reply_to_user_id"=>nil, "in_reply_to_user_id_str"=>nil, "in_reply_to_screen_name"=>nil, "user"=>{"id"=>592406989, "id_str"=>"592406989", "name"=>"can you not?", "screen_name"=>"SassyGirI", "location"=>"", "description"=>"Fabulous, feisty, fearless, feminine and fierce.\r\n                 Professional twerker", "url"=>"http://t.co/Z8FEpISl0H", "entities"=>{"url"=>{"urls"=>[{"url"=>"http://t.co/Z8FEpISl0H", "expanded_url"=>"http://coolpics.me", "display_url"=>"coolpics.me", "indices"=>[0, 22]}]}, "description"=>{"urls"=>[]}}, "protected"=>false, "followers_count"=>39186, "friends_count"=>933, "listed_count"=>34, "created_at"=>"Mon May 28 04:27:56 +0000 2012", "favourites_count"=>26, "utc_offset"=>-18000, "time_zone"=>"Central Time (US & Canada)", "geo_enabled"=>false, "verified"=>false, "statuses_count"=>143, "lang"=>"en", "contributors_enabled"=>false, "is_translator"=>false, "profile_background_color"=>"FF6699", "profile_background_image_url"=>"http://a0.twimg.com/images/themes/theme11/bg.gif", "profile_background_image_url_https"=>"https://si0.twimg.com/images/themes/theme11/bg.gif", "profile_background_tile"=>true, "profile_image_url"=>"http://a0.twimg.com/profile_images/378800000007458527/2ad610817c800c42ce67f11a6c4d37ec_normal.jpeg", "profile_image_url_https"=>"https://si0.twimg.com/profile_images/378800000007458527/2ad610817c800c42ce67f11a6c4d37ec_normal.jpeg", "profile_banner_url"=>"https://pbs.twimg.com/profile_banners/592406989/1371499649", "profile_link_color"=>"B40B43", "profile_sidebar_border_color"=>"CC3366", "profile_sidebar_fill_color"=>"E5507E", "profile_text_color"=>"362720", "profile_use_background_image"=>true, "default_profile"=>false, "default_profile_image"=>false, "following"=>false, "follow_request_sent"=>false, "notifications"=>false}, "geo"=>nil, "coordinates"=>nil, "place"=>nil, "contributors"=>nil, "retweet_count"=>102, "favorite_count"=>47, "entities"=>{"hashtags"=>[], "symbols"=>[], "urls"=>[], "user_mentions"=>[]}, "favorited"=>false, "retweeted"=>false, "lang"=>"en"}, "retweet_count"=>102, "favorite_count"=>0, "entities"=>{"hashtags"=>[], "symbols"=>[], "urls"=>[], "user_mentions"=>[{"screen_name"=>"SassyGirI", "name"=>"can you not?", "id"=>592406989, "id_str"=>"592406989", "indices"=>[3, 13]}]}, "favorited"=>false, "retweeted"=>false, "lang"=>"en"}, {"metadata"=>{"result_type"=>"recent", "iso_language_code"=>"en"}, "created_at"=>"Wed Aug 21 04:29:08 +0000 2013", "id"=>370039844904259584, "id_str"=>"370039844904259584", "text"=>"RT @AlbertBell132: I wanna have sex on a pile of thousands", "source"=>"<a href=\"http://twitter.com/download/iphone\" rel=\"nofollow\">Twitter for iPhone</a>", "truncated"=>false, "in_reply_to_status_id"=>nil, "in_reply_to_status_id_str"=>nil, "in_reply_to_user_id"=>nil, "in_reply_to_user_id_str"=>nil, "in_reply_to_screen_name"=>nil, "user"=>{"id"=>391471278, "id_str"=>"391471278", "name"=>"yup", "screen_name"=>"Hello_2MyKitten", "location"=>"", "description"=>"Dont know me? Dont judge me! #Follow me & ill lead the way", "url"=>nil, "entities"=>{"description"=>{"urls"=>[]}}, "protected"=>false, "followers_count"=>1094, "friends_count"=>1055, "listed_count"=>0, "created_at"=>"Sat Oct 15 16:25:54 +0000 2011", "favourites_count"=>142, "utc_offset"=>-18000, "time_zone"=>"Quito", "geo_enabled"=>false, "verified"=>false, "statuses_count"=>9912, "lang"=>"en", "contributors_enabled"=>false, "is_translator"=>false, "profile_background_color"=>"642D8B", "profile_background_image_url"=>"http://a0.twimg.com/images/themes/theme10/bg.gif", "profile_background_image_url_https"=>"https://si0.twimg.com/images/themes/theme10/bg.gif", "profile_background_tile"=>true, "profile_image_url"=>"http://a0.twimg.com/profile_images/378800000241220696/0e1235596d3b756c2da404e2ec37bea5_normal.jpeg", "profile_image_url_https"=>"https://si0.twimg.com/profile_images/378800000241220696/0e1235596d3b756c2da404e2ec37bea5_normal.jpeg", "profile_banner_url"=>"https://pbs.twimg.com/profile_banners/391471278/1366904602", "profile_link_color"=>"FF0000", "profile_sidebar_border_color"=>"65B0DA", "profile_sidebar_fill_color"=>"7AC3EE", "profile_text_color"=>"3D1957", "profile_use_background_image"=>true, "default_profile"=>false, "default_profile_image"=>false, "following"=>false, "follow_request_sent"=>false, "notifications"=>false}, "geo"=>nil, "coordinates"=>nil, "place"=>nil, "contributors"=>nil, "retweeted_status"=>{"metadata"=>{"result_type"=>"recent", "iso_language_code"=>"en"}, "created_at"=>"Wed Aug 21 04:25:36 +0000 2013", "id"=>370038953505980416, "id_str"=>"370038953505980416", "text"=>"I wanna have sex on a pile of thousands", "source"=>"<a href=\"http://twitter.com/download/iphone\" rel=\"nofollow\">Twitter for iPhone</a>", "truncated"=>false, "in_reply_to_status_id"=>nil, "in_reply_to_status_id_str"=>nil, "in_reply_to_user_id"=>nil, "in_reply_to_user_id_str"=>nil, "in_reply_to_screen_name"=>nil, "user"=>{"id"=>519066839, "id_str"=>"519066839", "name"=>"Albert BadAzz Bell", "screen_name"=>"AlbertBell132", "location"=>"Southside Toledo Ohio", "description"=>"2012NATIONAL GOLDEN GLOVES CHAMP,& the 2011NATIONAL PAL CHAMP@132lbs Now Pro Prospect @126lbs #TeamPrinceBell 1-0-1ko", "url"=>"http://t.co/YrA6P5BuEs", "entities"=>{"url"=>{"urls"=>[{"url"=>"http://t.co/YrA6P5BuEs", "expanded_url"=>"http://www.youtube.com/albertb419", "display_url"=>"youtube.com/albertb419", "indices"=>[0, 22]}]}, "description"=>{"urls"=>[]}}, "protected"=>false, "followers_count"=>1524, "friends_count"=>781, "listed_count"=>1, "created_at"=>"Fri Mar 09 01:35:10 +0000 2012", "favourites_count"=>876, "utc_offset"=>-25200, "time_zone"=>"Arizona", "geo_enabled"=>false, "verified"=>false, "statuses_count"=>14821, "lang"=>"en", "contributors_enabled"=>false, "is_translator"=>false, "profile_background_color"=>"C0DEED", "profile_background_image_url"=>"http://a0.twimg.com/images/themes/theme1/bg.png", "profile_background_image_url_https"=>"https://si0.twimg.com/images/themes/theme1/bg.png", "profile_background_tile"=>false, "profile_image_url"=>"http://a0.twimg.com/profile_images/378800000306240176/ddaef0b0d9fc4ed4a6924820548dc874_normal.jpeg", "profile_image_url_https"=>"https://si0.twimg.com/profile_images/378800000306240176/ddaef0b0d9fc4ed4a6924820548dc874_normal.jpeg", "profile_banner_url"=>"https://pbs.twimg.com/profile_banners/519066839/1376632971", "profile_link_color"=>"0084B4", "profile_sidebar_border_color"=>"C0DEED", "profile_sidebar_fill_color"=>"DDEEF6", "profile_text_color"=>"333333", "profile_use_background_image"=>true, "default_profile"=>true, "default_profile_image"=>false, "following"=>false, "follow_request_sent"=>false, "notifications"=>false}, "geo"=>nil, "coordinates"=>nil, "place"=>nil, "contributors"=>nil, "retweet_count"=>1, "favorite_count"=>0, "entities"=>{"hashtags"=>[], "symbols"=>[], "urls"=>[], "user_mentions"=>[]}, "favorited"=>false, "retweeted"=>false, "lang"=>"en"}, "retweet_count"=>1, "favorite_count"=>0, "entities"=>{"hashtags"=>[], "symbols"=>[], "urls"=>[], "user_mentions"=>[{"screen_name"=>"AlbertBell132", "name"=>"Albert BadAzz Bell", "id"=>519066839, "id_str"=>"519066839", "indices"=>[3, 17]}]}, "favorited"=>false, "retweeted"=>false, "lang"=>"en"}], "search_metadata"=>{"completed_in"=>0.009, "max_id"=>370039845194039296, "max_id_str"=>"370039845194039296", "next_results"=>"?max_id=370039844904259583&q=hello&lang=en&count=2&include_entities=1", "query"=>"hello", "refresh_url"=>"?since_id=370039845194039296&q=hello&lang=en&include_entities=1", "count"=>2, "since_id"=>0, "since_id_str"=>"0"}}

    result = TwitterShuwei::TweetSearchResult.new(response).to_model
    result.first.text.should == "RT @SassyGirI: hello 911\n\nI accidentally dropped the thun thun thun"
    result.first.user.name.should == "Cady Bodenhamer"
    result.first.created_at.should == "Wed Aug 21 04:29:08 +0000 2013"
  end
end